

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using GNewCash &mdash; gnewcash 1.0alpha documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Code Documentation" href="code_documentation.html" />
    <link rel="prev" title="Overview" href="overview.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> gnewcash
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using GNewCash</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#gnucashfile">GnuCashFile</a></li>
<li class="toctree-l2"><a class="reference internal" href="#book">Book</a></li>
<li class="toctree-l2"><a class="reference internal" href="#commodity">Commodity</a></li>
<li class="toctree-l2"><a class="reference internal" href="#account">Account</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#retrieving-accounts">Retrieving Accounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-accounts">Creating Accounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interest-accounts">Interest Accounts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#transaction">Transaction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="code_documentation.html">Code Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">gnewcash</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Using GNewCash</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-gnewcash">
<h1>Using GNewCash<a class="headerlink" href="#using-gnewcash" title="Permalink to this headline">¶</a></h1>
<div class="section" id="gnucashfile">
<h2>GnuCashFile<a class="headerlink" href="#gnucashfile" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="gnucash_file.html">GnuCashFile</a> is responsible for reading data from and writing data to GnuCash files.</p>
<p>To read a GnuCash file:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gnewcash</span> <span class="k">import</span> <span class="n">GnuCashFile</span>
<span class="n">my_file</span> <span class="o">=</span> <span class="n">GnuCashFile</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s1">&#39;/path/to/my/file.gnucash&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To write a GnuCash file (recommend backing up beforehand if overwriting an existing file):</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gnewcash</span> <span class="k">import</span> <span class="n">GnuCashFile</span><span class="p">,</span> <span class="n">Book</span>
<span class="n">my_book</span> <span class="o">=</span> <span class="n">Book</span><span class="p">()</span>
<span class="n">my_file</span> <span class="o">=</span> <span class="n">GnuCashFile</span><span class="p">([</span><span class="n">my_book</span><span class="p">])</span>
<span class="n">my_file</span><span class="o">.</span><span class="n">build_file</span><span class="p">(</span><span class="s1">&#39;/path/to/my/file.gnucash&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The build_file function accepts two arguments to modify how the file is written: <code class="code docutils literal notranslate"><span class="pre">prettify_xml</span></code> and <code class="code docutils literal notranslate"><span class="pre">use_gzip</span></code>. Both options are turned off by default.</p>
<ul class="simple">
<li><code class="code docutils literal notranslate"><span class="pre">prettify_xml</span></code> will prettify the XML before writing to disk. Helpful if the XML is to be reviewed on disk.</li>
<li><code class="code docutils literal notranslate"><span class="pre">use_gzip</span></code> will write the file to disk using GZip compression (GnuCash’s default).</li>
</ul>
</div>
<div class="section" id="book">
<h2>Book<a class="headerlink" href="#book" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="gnucash_file.html#gnucash_file.Book">Book</a> is a GnuCash entry that contains transactions, accounts, and their associated commodity.</p>
<p>When you read an existing GnuCash file, the book object(s) are automatically generated from the XML. To create a book object:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gnewcash</span> <span class="k">import</span> <span class="n">Book</span><span class="p">,</span> <span class="n">Account</span><span class="p">,</span> <span class="n">AccountType</span><span class="p">,</span> <span class="n">TransactionManager</span><span class="p">,</span> <span class="n">Commodity</span>
<span class="n">my_root_account</span> <span class="o">=</span> <span class="n">Account</span><span class="p">()</span>
<span class="n">my_root_account</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">AccountType</span><span class="o">.</span><span class="n">ROOT</span>
<span class="n">my_commodity</span> <span class="o">=</span> <span class="n">Commodity</span><span class="p">(</span><span class="s1">&#39;USD&#39;</span><span class="p">,</span> <span class="s1">&#39;ISO4217&#39;</span><span class="p">)</span>
<span class="n">my_transaction_manager</span> <span class="o">=</span> <span class="n">TransactionManager</span><span class="p">()</span>
<span class="n">my_book</span> <span class="o">=</span> <span class="n">Book</span><span class="p">(</span><span class="n">root_account</span><span class="o">=</span><span class="n">my_root_account</span><span class="p">,</span> <span class="n">transactions</span><span class="o">=</span><span class="n">my_transaction_manager</span><span class="p">,</span> <span class="n">commodities</span><span class="o">=</span><span class="p">[</span><span class="n">my_commodity</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="commodity">
<h2>Commodity<a class="headerlink" href="#commodity" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="commodity.html">Commodity</a> is a GnuCash entry that defines the type of currency used for the book/account/transaction.</p>
<p>You can find more information on commodities and their implementations <a class="reference external" href="https://code.gnucash.org/docs/MAINT/group__Commodity.html">here</a>.</p>
<p>There is a long list of available commodities in GnuCash. Implementing each one isn’t practical, so I’d recommend opening an uncompressed GnuCash file and view which commodity you’re using in the XML.</p>
<p>Here’s an example:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;gnc:commodity</span> <span class="na">version=</span><span class="s">&quot;2.0.0&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;cmdty:space&gt;</span>ISO4217<span class="nt">&lt;/cmdty:space&gt;</span>
  <span class="nt">&lt;cmdty:id&gt;</span>USD<span class="nt">&lt;/cmdty:id&gt;</span>
  <span class="nt">&lt;cmdty:get_quotes/&gt;</span>
  <span class="nt">&lt;cmdty:quote_source&gt;</span>currency<span class="nt">&lt;/cmdty:quote_source&gt;</span>
  <span class="nt">&lt;cmdty:quote_tz/&gt;</span>
<span class="nt">&lt;/gnc:commodity&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="account">
<h2>Account<a class="headerlink" href="#account" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="account.html">Account</a> is a GnuCash entry that’s best described from the <a class="reference external" href="https://www.gnucash.org/docs/v3/C/gnucash-guide/accts-types1.html">GnuCash documentation itself</a>.</p>
<p>It’s essentially a “bucket” that you can assign transaction splits to. Accounts can also have sub-accounts.</p>
<div class="section" id="retrieving-accounts">
<h3>Retrieving Accounts<a class="headerlink" href="#retrieving-accounts" title="Permalink to this headline">¶</a></h3>
<p>When you read in an existing GnuCash file, the accounts and their subaccounts are loaded into the <code class="code docutils literal notranslate"><span class="pre">root_account</span></code> property of the Book.
You can retrieve subaccounts by either accessing the <code class="code docutils literal notranslate"><span class="pre">children</span></code> property of the root account (not recommended) or using the
<code class="code docutils literal notranslate"><span class="pre">get_account</span></code> method on the Book object (recommended).</p>
<p>Using <code class="code docutils literal notranslate"><span class="pre">get_account</span></code> is pretty straightforward. Each account name from the root account should be an argument to <code class="code docutils literal notranslate"><span class="pre">get_account</span></code>.</p>
<p>For example, if your hierarchy structure in GnuCash is:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>Root Account</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Assets</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Current Assets</dt>
<dd><ul class="first last">
<li>Checking Account</li>
<li>Credit Card</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Expenses</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Bills</dt>
<dd><ul class="first last">
<li>Rent</li>
<li>Phone</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>And you want to get the “Checking Account” account, this call will retrieve it for you:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">checking_account</span> <span class="o">=</span> <span class="n">my_book</span><span class="o">.</span><span class="n">get_account</span><span class="p">(</span><span class="s1">&#39;Assets&#39;</span><span class="p">,</span> <span class="s1">&#39;Current Assets&#39;</span><span class="p">,</span> <span class="s1">&#39;Checking Account&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-accounts">
<h3>Creating Accounts<a class="headerlink" href="#creating-accounts" title="Permalink to this headline">¶</a></h3>
<p>There isn’t a default “loader” for accounts, as everyone’s requirements (or preferences) are different. To create it purely in code, you’d do the following:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gnewcash</span> <span class="k">import</span> <span class="n">Account</span><span class="p">,</span> <span class="n">AccountType</span>
<span class="n">my_root_account</span> <span class="o">=</span> <span class="n">Account</span><span class="p">()</span>
<span class="n">my_root_account</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">AccountType</span><span class="o">.</span><span class="n">ROOT</span>

<span class="n">assets_account</span> <span class="o">=</span> <span class="n">Account</span><span class="p">()</span>
<span class="n">assets_account</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">AccountType</span><span class="o">.</span><span class="n">ASSET</span>
<span class="n">assets_account</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Assets&#39;</span>
<span class="n">assets_account</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">my_root_account</span>

<span class="n">current_assets_account</span> <span class="o">=</span> <span class="n">Account</span><span class="p">()</span>
<span class="n">current_assets_account</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">AccountType</span><span class="o">.</span><span class="n">ASSET</span>
<span class="n">current_assets_account</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Current Assets&#39;</span>
<span class="n">current_assets_account</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">assets_account</span>

<span class="n">checking_account</span> <span class="o">=</span> <span class="n">Account</span><span class="p">()</span>
<span class="n">checking_account</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">AccountType</span><span class="o">.</span><span class="n">BANK</span>
<span class="n">checking_account</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Checking Account&#39;</span>
<span class="n">checking_account</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">current_assets_account</span>

<span class="n">credit_card_account</span> <span class="o">=</span> <span class="n">Account</span><span class="p">()</span>
<span class="n">credit_card_account</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">AccountType</span><span class="o">.</span><span class="n">CREDIT</span>
<span class="n">credit_card_account</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Credit Card&#39;</span>
<span class="n">credit_card_account</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">current_assets_account</span>
</pre></div>
</div>
<p>As you can tell, the code above is unwieldy.
GNewCash does support <a class="reference external" href="account.html#shortcut-accounts">shortcut accounts</a> that cuts down on the lines of code. Here’s the same example using shortcut accounts.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gnewcash</span> <span class="k">import</span> <span class="n">Account</span><span class="p">,</span> <span class="n">AccountType</span><span class="p">,</span> <span class="n">AssetAccount</span><span class="p">,</span> <span class="n">BankAccount</span><span class="p">,</span> <span class="n">CreditAccount</span>
<span class="n">my_root_account</span> <span class="o">=</span> <span class="n">Account</span><span class="p">()</span>
<span class="n">my_root_account</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">AccountType</span><span class="o">.</span><span class="n">ROOT</span>

<span class="n">assets_account</span> <span class="o">=</span> <span class="n">AssetAccount</span><span class="p">()</span>
<span class="n">assets_account</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Assets&#39;</span>
<span class="n">assets_account</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">my_root_account</span>

<span class="n">current_assets_account</span> <span class="o">=</span> <span class="n">AssetAccount</span><span class="p">()</span>
<span class="n">current_assets_account</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Current Assets&#39;</span>
<span class="n">current_assets_account</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">assets_account</span>

<span class="n">checking_account</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="p">()</span>
<span class="n">checking_account</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Checking Account&#39;</span>
<span class="n">checking_account</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">current_assets_account</span>

<span class="n">credit_card_account</span> <span class="o">=</span> <span class="n">CreditAccount</span><span class="p">()</span>
<span class="n">credit_card_account</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Credit Card&#39;</span>
<span class="n">credit_card_account</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">current_assets_account</span>
</pre></div>
</div>
<p>Better, but still a bit much. Here’s a JSON loader I wrote for personal usage:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">gnewcash</span> <span class="k">import</span> <span class="n">Account</span><span class="p">,</span> <span class="n">BankAccount</span><span class="p">,</span> <span class="n">IncomeAccount</span><span class="p">,</span> <span class="n">AssetAccount</span><span class="p">,</span> <span class="n">CreditAccount</span><span class="p">,</span> <span class="n">ExpenseAccount</span><span class="p">,</span> <span class="n">EquityAccount</span><span class="p">,</span> <span class="n">LiabilityAccount</span>

<span class="k">def</span> <span class="nf">load_accounts_from_json</span><span class="p">(</span><span class="n">json_file</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">json_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">account_data_file</span><span class="p">:</span>
        <span class="n">account_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">account_data_file</span><span class="p">)</span>

    <span class="n">accounts</span> <span class="o">=</span> <span class="n">load_account_and_subaccounts</span><span class="p">(</span><span class="n">account_data</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">accounts</span>


<span class="k">def</span> <span class="nf">load_account_and_subaccounts</span><span class="p">(</span><span class="n">account_object</span><span class="p">,</span> <span class="n">account_parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">current_path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">account_lookup</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="n">account_class</span> <span class="o">=</span> <span class="n">get_account_type</span><span class="p">(</span><span class="n">account_object</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>

    <span class="n">account_class_object</span> <span class="o">=</span> <span class="n">account_class</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">account_object</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;ROOT&#39;</span><span class="p">:</span>
        <span class="n">account_class_object</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">AccountType</span><span class="o">.</span><span class="n">ROOT</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">account_class_object</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">account_object</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="n">account_class_object</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">account_parent</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">current_path</span><span class="p">:</span>
        <span class="n">account_lookup</span><span class="p">[</span><span class="s1">&#39;/&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">account_class_object</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">account_lookup</span><span class="p">[</span><span class="n">current_path</span> <span class="o">+</span> <span class="n">account_object</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">account_class_object</span>

    <span class="k">for</span> <span class="n">account</span> <span class="ow">in</span> <span class="n">account_object</span><span class="p">[</span><span class="s1">&#39;subaccounts&#39;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">current_path</span><span class="p">:</span>
            <span class="n">account_lookup</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">load_account_and_subaccounts</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">account_class_object</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">account_lookup</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">load_account_and_subaccounts</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">account_class_object</span><span class="p">,</span> <span class="n">current_path</span> <span class="o">+</span>
                                                               <span class="n">account_object</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">account_lookup</span>

<span class="k">def</span> <span class="nf">get_account_type</span><span class="p">(</span><span class="n">account_type_string</span><span class="p">):</span>
    <span class="n">account_type_mapping</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;ROOT&#39;</span><span class="p">:</span> <span class="n">Account</span><span class="p">,</span>
        <span class="s1">&#39;BANK&#39;</span><span class="p">:</span> <span class="n">BankAccount</span><span class="p">,</span>
        <span class="s1">&#39;INCOME&#39;</span><span class="p">:</span> <span class="n">IncomeAccount</span><span class="p">,</span>
        <span class="s1">&#39;ASSET&#39;</span><span class="p">:</span> <span class="n">AssetAccount</span><span class="p">,</span>
        <span class="s1">&#39;CREDIT&#39;</span><span class="p">:</span> <span class="n">CreditAccount</span><span class="p">,</span>
        <span class="s1">&#39;EXPENSE&#39;</span><span class="p">:</span> <span class="n">ExpenseAccount</span><span class="p">,</span>
        <span class="s1">&#39;EQUITY&#39;</span><span class="p">:</span> <span class="n">EquityAccount</span><span class="p">,</span>
        <span class="s1">&#39;LIABILITY&#39;</span><span class="p">:</span> <span class="n">LiabilityAccount</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">account_type_mapping</span><span class="p">[</span><span class="n">account_type_string</span><span class="p">]</span>
</pre></div>
</div>
<p>Passing in a JSON file into <code class="code docutils literal notranslate"><span class="pre">load_accounts_from_json</span></code> with this structure:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Root Account&quot;</span><span class="p">,</span>
  <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ROOT&quot;</span><span class="p">,</span>
  <span class="nt">&quot;subaccounts&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Expenses&quot;</span><span class="p">,</span>
      <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;expenses&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;EXPENSE&quot;</span><span class="p">,</span>
      <span class="nt">&quot;subaccounts&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
          <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bills&quot;</span><span class="p">,</span>
          <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;bills&quot;</span><span class="p">,</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;EXPENSE&quot;</span><span class="p">,</span>
          <span class="nt">&quot;subaccounts&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
              <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Rent&quot;</span><span class="p">,</span>
              <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;rent&quot;</span><span class="p">,</span>
              <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;EXPENSE&quot;</span><span class="p">,</span>
              <span class="nt">&quot;subaccounts&quot;</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Phone&quot;</span><span class="p">,</span>
              <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;phone&quot;</span><span class="p">,</span>
              <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;EXPENSE&quot;</span><span class="p">,</span>
              <span class="nt">&quot;subaccounts&quot;</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">}</span>
          <span class="p">]</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Assets&quot;</span><span class="p">,</span>
      <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;assets&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ASSET&quot;</span><span class="p">,</span>
      <span class="nt">&quot;subaccounts&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Current Assets&quot;</span><span class="p">,</span>
          <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;current_assets&quot;</span><span class="p">,</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ASSET&quot;</span><span class="p">,</span>
          <span class="nt">&quot;subaccounts&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
              <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Checking Account&quot;</span><span class="p">,</span>
              <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;checking_account&quot;</span><span class="p">,</span>
              <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;BANK&quot;</span><span class="p">,</span>
              <span class="nt">&quot;subaccounts&quot;</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Credit Card&quot;</span><span class="p">,</span>
              <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;credit_card&quot;</span><span class="p">,</span>
              <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;CREDIT&quot;</span><span class="p">,</span>
              <span class="nt">&quot;subaccounts&quot;</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">}</span>
          <span class="p">]</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Will yield the following <code class="code docutils literal notranslate"><span class="pre">dict</span></code>:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;/&#39;</span><span class="p">:</span> <span class="n">root_account</span><span class="p">,</span>
    <span class="s1">&#39;/assets&#39;</span><span class="p">:</span> <span class="n">assets_account</span><span class="p">,</span>
    <span class="s1">&#39;/assets/current_assets&#39;</span><span class="p">:</span> <span class="n">current_assets_account</span><span class="p">,</span>
    <span class="s1">&#39;/assets/current_assets/checking_account&#39;</span><span class="p">:</span> <span class="n">checking_account</span><span class="p">,</span>
    <span class="s1">&#39;/assets/current_assets/credit_card&#39;</span><span class="p">:</span> <span class="n">credit_card_account</span><span class="p">,</span>
    <span class="s1">&#39;/expenses&#39;</span><span class="p">:</span> <span class="n">expenses_account</span><span class="p">,</span>
    <span class="s1">&#39;/expenses/bills&#39;</span><span class="p">:</span> <span class="n">bills_account</span><span class="p">,</span>
    <span class="s1">&#39;/expenses/bills/rent&#39;</span><span class="p">:</span> <span class="n">rent_account</span><span class="p">,</span>
    <span class="s1">&#39;/expenses/bills/phone&#39;</span><span class="p">:</span> <span class="n">phone_account</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Feel free to use or modify that for your own usage!</p>
</div>
<div class="section" id="interest-accounts">
<h3>Interest Accounts<a class="headerlink" href="#interest-accounts" title="Permalink to this headline">¶</a></h3>
<p>Interest accounts are <a class="reference external" href="account.html#special-accounts">special accounts</a> that actually aren’t used inside GnuCash.
Trying to add one of the special accounts to a GnuCash file would result in an error.</p>
<p>The purpose of an interest account is to calculate balances and payment schedules for loans that accumulate interest.</p>
<p>Here’s the general usage of an interest account:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">decimal</span> <span class="k">import</span> <span class="n">Decimal</span>

<span class="kn">from</span> <span class="nn">gnewcash</span> <span class="k">import</span> <span class="n">InterestAccount</span>

<span class="n">my_loan</span> <span class="o">=</span> <span class="n">InterestAccount</span><span class="p">(</span><span class="n">starting_balance</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1000&#39;</span><span class="p">),</span>
                          <span class="n">starting_date</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                          <span class="n">interest_percentage</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.05&#39;</span><span class="p">),</span>  <span class="c1"># 5% APR</span>
                          <span class="n">payment_amount</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;50&#39;</span><span class="p">))</span>
<span class="n">my_loan</span><span class="o">.</span><span class="n">get_info_at_date</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

<span class="c1"># LoanStatus(iterator_balance=Decimal(&#39;722.15&#39;), iterator_date=datetime.datetime(2019, 7, 1, 0, 0), interest=Decimal(&#39;3.21&#39;), amount_to_capital=Decimal(&#39;46.79&#39;))</span>

<span class="n">my_loan</span><span class="o">.</span><span class="n">get_all_payments</span><span class="p">()</span>

<span class="c1"># Probably should be converted to a namedtuple, but fields are: date, balance before payment, amount to principal</span>
<span class="c1"># [(datetime.datetime(2019, 2, 1, 0, 0), Decimal(&#39;1000&#39;), Decimal(&#39;45.83&#39;)),</span>
<span class="c1">#  (datetime.datetime(2019, 3, 1, 0, 0), Decimal(&#39;954.17&#39;), Decimal(&#39;46.02&#39;)),</span>
<span class="c1">#  (datetime.datetime(2019, 4, 1, 0, 0), Decimal(&#39;908.15&#39;), Decimal(&#39;46.21&#39;)),</span>
<span class="c1">#  (datetime.datetime(2019, 5, 1, 0, 0), Decimal(&#39;861.94&#39;), Decimal(&#39;46.40&#39;)),</span>
<span class="c1">#  (datetime.datetime(2019, 6, 1, 0, 0), Decimal(&#39;815.54&#39;), Decimal(&#39;46.60&#39;)),</span>
<span class="c1">#  (datetime.datetime(2019, 7, 1, 0, 0), Decimal(&#39;768.94&#39;), Decimal(&#39;46.79&#39;)),</span>
<span class="c1">#  (datetime.datetime(2019, 8, 1, 0, 0), Decimal(&#39;722.15&#39;), Decimal(&#39;46.99&#39;)),</span>
<span class="c1">#  (datetime.datetime(2019, 9, 1, 0, 0), Decimal(&#39;675.16&#39;), Decimal(&#39;47.18&#39;)),</span>
<span class="c1">#  (datetime.datetime(2019, 10, 1, 0, 0), Decimal(&#39;627.98&#39;), Decimal(&#39;47.38&#39;)),</span>
<span class="c1">#  (datetime.datetime(2019, 11, 1, 0, 0), Decimal(&#39;580.60&#39;), Decimal(&#39;47.58&#39;)),</span>
<span class="c1">#  (datetime.datetime(2019, 12, 1, 0, 0), Decimal(&#39;533.02&#39;), Decimal(&#39;47.77&#39;)),</span>
<span class="c1">#  (datetime.datetime(2020, 1, 1, 0, 0), Decimal(&#39;485.25&#39;), Decimal(&#39;47.97&#39;)),</span>
<span class="c1">#  (datetime.datetime(2020, 2, 1, 0, 0), Decimal(&#39;437.28&#39;), Decimal(&#39;48.17&#39;)),</span>
<span class="c1">#  (datetime.datetime(2020, 3, 1, 0, 0), Decimal(&#39;389.11&#39;), Decimal(&#39;48.37&#39;)),</span>
<span class="c1">#  (datetime.datetime(2020, 4, 1, 0, 0), Decimal(&#39;340.74&#39;), Decimal(&#39;48.58&#39;)),</span>
<span class="c1">#  (datetime.datetime(2020, 5, 1, 0, 0), Decimal(&#39;292.16&#39;), Decimal(&#39;48.78&#39;)),</span>
<span class="c1">#  (datetime.datetime(2020, 6, 1, 0, 0), Decimal(&#39;243.38&#39;), Decimal(&#39;48.98&#39;)),</span>
<span class="c1">#  (datetime.datetime(2020, 7, 1, 0, 0), Decimal(&#39;194.40&#39;), Decimal(&#39;49.18&#39;)),</span>
<span class="c1">#  (datetime.datetime(2020, 8, 1, 0, 0), Decimal(&#39;145.22&#39;), Decimal(&#39;49.39&#39;)),</span>
<span class="c1">#  (datetime.datetime(2020, 9, 1, 0, 0), Decimal(&#39;95.83&#39;), Decimal(&#39;49.60&#39;)),</span>
<span class="c1">#  (datetime.datetime(2020, 10, 1, 0, 0), Decimal(&#39;46.23&#39;), Decimal(&#39;49.80&#39;))]</span>
</pre></div>
</div>
<p>Interest accounts also take the following constructor parameters:</p>
<ul>
<li><dl class="first docutils">
<dt><code class="code docutils literal notranslate"><span class="pre">additional_payments</span></code></dt>
<dd><p class="first">List of dictionaries containing the following key-value pairs:</p>
<p>Note: Additional payments are assumed to have no interest collected on them.</p>
<ul class="last simple">
<li><code class="code docutils literal notranslate"><span class="pre">amount</span></code>: Dollar amount for the additional payment (Decimal)</li>
<li><code class="code docutils literal notranslate"><span class="pre">payment_date</span></code>: Date of the additional payment (datetime)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="code docutils literal notranslate"><span class="pre">skip_payment_dates</span></code></dt>
<dd><p class="first last">List of <code class="code docutils literal notranslate"><span class="pre">datetime</span></code> objects for dates that payments should be skipped.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="code docutils literal notranslate"><span class="pre">interest_start_date</span></code></dt>
<dd><p class="first last"><code class="code docutils literal notranslate"><span class="pre">datetime</span></code> object that designates when interest starts incurring on the loan.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="code docutils literal notranslate"><span class="pre">subaccounts</span></code></dt>
<dd><p class="first last">List of InterestAccount objects that make up the parent interest account.
This is helpful for things like school loans where your overall loan is comprised of multiple small loans.
When setting up subaccounts, pass <code class="code docutils literal notranslate"><span class="pre">None</span></code> for <code class="code docutils literal notranslate"><span class="pre">starting_balance</span></code>, <code class="code docutils literal notranslate"><span class="pre">starting_date</span></code>,
<code class="code docutils literal notranslate"><span class="pre">interest_percentage</span></code>, and <code class="code docutils literal notranslate"><span class="pre">payment_amount</span></code> in the parent InterestAccount. When accessing those fields,
they will be derived from their child accounts’ information.</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="transaction">
<h2>Transaction<a class="headerlink" href="#transaction" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="code_documentation.html" class="btn btn-neutral float-right" title="Code Documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Paul Bromwell Jr.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>